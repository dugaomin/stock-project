# 全网筛选业务规则深度解析

本文档详细说明了"全网筛选"功能的底层业务逻辑和筛选规则，帮助用户理解为什么某些股票（如贵州茅台 600519）可能无法通过筛选。

## 1. 筛选范围与数据策略

- **股票范围**：全部A股上市公司，自动排除ST/PT股票。
- **数据策略**：
  - 采用"获取所有可用数据"策略（查询范围1990-2999）。
  - 自动从返回的数据中截取**最近5个完整会计年度**的数据进行分析。
  - 目的：避免因人为预判年报发布时间而导致的数据缺失问题。

## 2. 第一层：基本面硬性筛选（必须全部满足）

只有同时满足以下4个条件的股票，才能进入下一轮估值筛选。任何一项不满足直接淘汰。

### 2.1 数据完整性 (Data Sufficiency)
- **规则**：必须拥有完整的**最近5年**年度财务数据。
- **目的**：确保分析的连续性和稳定性，排除上市时间过短或财报缺失的公司。
- **示例**：如果某公司只有4年数据，直接淘汰。

### 2.2 审计意见 (Audit Opinion)
- **规则**：最近5年的审计意见必须**全部**为"标准无保留意见"。
- **目的**：排除财务造假风险，确保财报可信度。
- **失败情况**：只要有一年是"保留意见"、"无法表示意见"等，即淘汰。

### 2.3 现金流为正 (Positive Cash Flow)
- **规则**：最近5年的**经营活动产生的现金流量净额**必须**全部 > 0**。
- **目的**：确保公司主营业务具备造血能力，而不是靠融资或变卖资产生存。
- **失败情况**：只要有一年经营现金流为负，即淘汰。

### 2.4 现金流覆盖利润 (Cash Flow Coverage) ⭐⭐⭐
- **规则**：最近5年的**经营现金流**必须**全部 ≥ 净利润**。
- **公式**：`经营活动现金流量净额 - 净利润 ≥ 0`
- **目的**：验证利润的"含金量"。
  - 如果净利润很高，但收不到现金（全是应收账款），说明利润质量低，有坏账风险。
  - 巴菲特推崇"真金白银"的利润。
- **常见失败原因**：
  - 贵州茅台 (600519) 在此项失败。虽然它是优质公司，但在某些年份（如2012, 2013等历史年份或近期某些年份），其经营现金流略低于净利润（可能是由于预收账款确认收入的时间差或存货变动）。
  - **这是最严格的一条规则**，许多白马股也可能因此被筛掉。

## 3. 第二层：估值筛选（巴菲特市赚率模型）

通过基本面筛选的股票，将进行估值计算。

### 3.1 修正市赚率 (PR)
- **规则**：`修正PR值 ≤ 阈值`（默认 1.0）。
- **计算逻辑**：
  1. 获取最新收盘价和PE（TTM）。
  2. 计算修正系数 N = 1 / (股息支付率 + (1-股息支付率)/ROE)。
  3. **PR = N × PE / (ROE × 100)**。
- **含义**：PR值越低，性价比越高。PR=1.0 意味着价格合理，PR<0.5 意味着严重低估。

### 3.2 最低ROE要求
- **规则**：`ROE(加权) ≥ 阈值`（默认 10%）。
- **目的**：确保公司具有基本的盈利能力。

## 4. 总结：为什么 600519 没通过？

尽管贵州茅台在审计意见、数据完整性、现金流为正、以及估值（PR=0.55, ROE=24%）方面都表现优异，但它未能通过**基本面筛选的第4条规则**：

> **❌ 现金流覆盖利润**：要求连续5年，每年经营现金流都要大于等于净利润。

茅台在最近5年中，存在经营现金流少于净利润的年份。这并不代表它不是好公司，而是说明它不符合该筛选器设定的**极其严格的"现金牛"标准**。

---
*文档生成时间：2025-11-25*
