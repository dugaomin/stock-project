# 📊 A股财务分析系统

> 基于审计意见与三大核心指标的智能筛选系统  
> 5分钟快速评估公司财务健康状况，小白也能看懂！

[![Python](https://img.shields.io/badge/Python-3.8+-blue.svg)](https://www.python.org/)
[![Streamlit](https://img.shields.io/badge/Streamlit-1.28+-red.svg)](https://streamlit.io/)
[![License](https://img.shields.io/badge/License-MIT-green.svg)](LICENSE)

[在线演示](#) | [使用指南](使用指南.md) | [开发文档](开发文档.md)

## 📊 功能特点

### 核心功能
- ✅ **审计意见分析** - 检查是否为标准无保留意见
- ✅ **三大核心指标** - 资产负债率、毛利率、经营现金流
- ✅ **行业分类评估** - 不同行业使用不同标准
- ✅ **年度健康度** - 直观的红绿灯评分系统
- ✅ **公司基本信息** - 董事长、主营业务、经营范围等
- ✅ **历史记录** - 自动保存分析历史

### 技术特点
- ⚡ **智能缓存** - 24小时持久化缓存，大幅减少API调用
- 📈 **趋势图表** - Plotly交互式图表展示
- 🎯 **评分系统** - 0-3分评分，快速判断财务质量
- 💾 **数据持久化** - 缓存和历史记录自动保存

## 🚀 快速开始

### 环境要求
- Python 3.8+
- Tushare API Token（需120+积分）

### 安装依赖

```bash
pip install -r requirements.txt
```

### 配置Token

创建 `settings.py` 文件：

```python
# -*- coding: utf-8 -*-
"""配置模块：集中管理常量与参数。"""

DEFAULT_TOKEN = "your_tushare_token_here"  # 替换为你的token
```

### 运行应用

```bash
streamlit run app.py
```

访问：http://localhost:8501

## 📋 使用说明

### 1. 选择行业分类
在侧边栏选择股票所属行业（消费、科技、地产、制造业等），系统会使用对应的评分标准。

### 2. 设置分析年份
- 开始年：自由输入（如2018）
- 结束年：自由输入（如2023）

### 3. 输入股票代码
支持两种格式：
- 6位代码：`600519` （自动补全后缀）
- 完整代码：`600519.SH`

### 4. 查询与缓存
- 第一次查询：约0.5秒（调用API+自动缓存）
- 后续查询：<0.1秒（使用缓存，24小时有效）

## 🎯 三大核心指标说明

### 2.1 资产负债率
- **公式**：总负债 / 总资产 × 100%
- **含义**：公司用多少"借来的钱"在运营
- **标准**：
  - 地产：<60%较健康
  - 科技：>50%需警惕
  - 消费：越低越安全

### 2.2 毛利率
- **公式**：（营业收入 − 营业成本）/ 营业收入 × 100%
- **含义**：产品/服务的基本赚钱能力
- **标准**：
  - 制造业：25%可能很优秀
  - 消费行业：<40%需警惕
  - 品牌溢价强：通常60%+

### 2.3 经营活动现金流量净额
- **核心两问**：
  1. 连续3-5年为正吗？
  2. 是否持续≥净利润？
- **含义**：是否赚到"真金白银"

## 💾 缓存管理

系统会自动缓存查询结果到 `data/cache/` 目录：
- ✅ 有效期：24小时
- ✅ 自动管理：过期自动清理
- ✅ 可视化：侧边栏显示缓存统计
- ✅ 手动清理：支持清理过期或清空全部

## 📁 项目结构

```
自我研究开发/
├── app.py                  # 主应用
├── utils.py               # 数据获取工具
├── cache_manager.py       # 缓存管理器
├── settings.py            # Token配置（不上传）
├── requirements.txt       # 依赖包
├── test.py               # 连通性测试
├── test_token.py         # Token测试
└── data/
    ├── cache/            # 缓存目录
    └── analysis_history.json  # 历史记录
```

## ⚙️ API设置

根据Tushare积分等级选择延迟：

| 积分 | 等级 | 延迟 | 查询耗时 |
|------|------|------|---------|
| 0-119 | 未认证 | 31秒 | ~2分钟 |
| 120-599 | 注册用户 | 13秒 | ~1分钟 |
| 600-4999 | 中级用户 | 0.1秒 | ~0.5秒 ✅ |
| 5000+ | 高级用户 | 0秒 | ~0.3秒 |

## 📝 数据来源

- **Tushare Pro API** - 中国A股财务数据
- 官网：https://tushare.pro
- 需要至少120积分才能使用财务数据接口

## 📄 License

MIT License

## 👤 作者

gaomindu

---

⭐ 如果觉得有用，请给个Star！

